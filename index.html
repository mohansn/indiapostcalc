<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shipping Charge Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f9f9f9;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 1.5rem;
      text-align: center;
      margin-bottom: 1rem;
    }
    .form-group {
      margin-top: 1rem;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 0.25rem;
    }
    input, select {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }
    button {
      margin-top: 1.5rem;
      width: 100%;
      padding: 0.75rem;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
    }
    button:hover {
      background: #0056b3;
    }
    .result {
      margin-top: 1.5rem;
      padding: 1rem;
      background: #eef;
      border-radius: 8px;
      font-size: 1.1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Shipping Charge Calculator</h1>

    <div class="form-group">
      <label for="product">Product</label>
      <select id="product" required>
        <option value="LETTERS">Letters</option>
        <option value="SMALL_PACKETS">Small Packets</option>
        <option value="PRINTED_PAPER">Printed Paper</option>
        <option value="M_BAG">M Bag</option>
        <option value="POSTCARD">Airmail Post Card</option>
        <option value="AEROGRAMME">Aerogramme</option>
      </select>
    </div>

    <div class="form-group">
      <label for="country">Destination Country</label>
      <select id="country" required></select>
    </div>

    <div class="form-group">
      <label for="continent">Continent / Sector</label>
      <input type="text" id="continent" readonly>
    </div>

    <div class="form-group">
      <label for="mode">Delivery Mode</label>
      <select id="mode">
        <option value="NORMAL">Normal</option>
        <option value="SAL">Surface Airlifted (SAL)</option>
        <option value="AIR">Air</option>
      </select>
    </div>

    <div class="form-group">
      <label for="weight">Weight (grams)</label>
      <input type="number" id="weight" min="1" required>
    </div>

    <button onclick="calculate()">Calculate</button>

    <div id="result" class="result" style="display:none;"></div>
  </div>

  <script>
    // === Country to Continent Map (UPU members, excluded list removed) ===
    const countryToContinent = {
      "Afghanistan": "Asia",
      "Albania": "Europe",
      "Algeria": "Africa",
      "Andorra": "Europe",
      "Angola": "Africa",
      "Argentina": "South America",
      "Armenia": "Asia",
      "Australia": "North America & Australia",
      "Austria": "Europe",
      "Azerbaijan": "Asia",
      "Bahamas": "North America & Australia",
      "Bahrain": "Asia",
      "Bangladesh": "Asia",
      "Benin": "Africa",
      "Bhutan": "Asia",
      "Bolivia": "South America",
      "Bosnia and Herzegovina": "Europe",
      "Botswana": "Africa",
      "Brazil": "South America",
      "Brunei": "Asia",
      "Bulgaria": "Europe",
      "Burkina Faso": "Africa",
      "Burundi": "Africa",
      "Cambodia": "Asia",
      "Cameroon": "Africa",
      "Canada": "North America & Australia",
      "Cape Verde": "Africa",
      "Central African Republic": "Africa",
      "Chad": "Africa",
      "Chile": "South America",
      "China": "Asia",
      "Colombia": "South America",
      "Comoros": "Africa",
      "Congo": "Africa",
      "Costa Rica": "South America",
      "Croatia": "Europe",
      "Cuba": "South America",
      "Cyprus": "Europe",
      "Czech Republic": "Europe",
      "Denmark": "Europe",
      "Djibouti": "Africa",
      "Dominican Republic": "South America",
      "Ecuador": "South America",
      "Egypt": "Africa",
      "El Salvador": "South America",
      "Equatorial Guinea": "Africa",
      "Eritrea": "Africa",
      "Estonia": "Europe",
      "Eswatini": "Africa",
      "Ethiopia": "Africa",
      "Fiji": "North America & Australia",
      "Finland": "Europe",
      "France": "Europe",
      "Gabon": "Africa",
      "Gambia": "Africa",
      "Georgia": "Asia",
      "Germany": "Europe",
      "Ghana": "Africa",
      "Greece": "Europe",
      "Guatemala": "South America",
      "Guinea": "Africa",
      "Guyana": "South America",
      "Haiti": "South America",
      "Honduras": "South America",
      "Hungary": "Europe",
      "Iceland": "Europe",
      "India": "Asia",
      "Indonesia": "Asia",
      "Ireland": "Europe",
      "Italy": "Europe",
      "Japan": "Asia",
      "Jordan": "Asia",
      "Kazakhstan": "Asia",
      "Kenya": "Africa",
      "Kiribati": "North America & Australia",
      "Korea (South)": "Asia",
      "Kuwait": "Asia",
      "Kyrgyzstan": "Asia",
      "Latvia": "Europe",
      "Lebanon": "Asia",
      "Lesotho": "Africa",
      "Liberia": "Africa",
      "Liechtenstein": "Europe",
      "Lithuania": "Europe",
      "Luxembourg": "Europe",
      "Madagascar": "Africa",
      "Malawi": "Africa",
      "Malaysia": "Asia",
      "Maldives": "Asia",
      "Mali": "Africa",
      "Malta": "Europe",
      "Mauritania": "Africa",
      "Mauritius": "Africa",
      "Mexico": "North America & Australia",
      "Moldova": "Europe",
      "Monaco": "Europe",
      "Mongolia": "Asia",
      "Montenegro": "Europe",
      "Morocco": "Africa",
      "Mozambique": "Africa",
      "Myanmar": "Asia",
      "Namibia": "Africa",
      "Nauru": "North America & Australia",
      "Nepal": "Asia",
      "Netherlands": "Europe",
      "New Zealand": "North America & Australia",
      "Nicaragua": "South America",
      "Niger": "Africa",
      "Nigeria": "Africa",
      "North Macedonia": "Europe",
      "Norway": "Europe",
      "Oman": "Asia",
      "Panama": "South America",
      "Papua New Guinea": "North America & Australia",
      "Paraguay": "South America",
      "Peru": "South America",
      "Philippines": "Asia",
      "Poland": "Europe",
      "Portugal": "Europe",
      "Qatar": "Asia",
      "Romania": "Europe",
      "Russia": "Europe",
      "Rwanda": "Africa",
      "Samoa": "North America & Australia",
      "San Marino": "Europe",
      "Saudi Arabia": "Asia",
      "Senegal": "Africa",
      "Serbia": "Europe",
      "Seychelles": "Africa",
      "Sierra Leone": "Africa",
      "Singapore": "Asia",
      "Slovakia": "Europe",
      "Slovenia": "Europe",
      "Solomon Islands": "North America & Australia",
      "Somalia": "Africa",
      "South Africa": "Africa",
      "South Sudan": "Africa",
      "Spain": "Europe",
      "Sri Lanka": "Asia",
      "Suriname": "South America",
      "Sweden": "Europe",
      "Switzerland": "Europe",
      "Tajikistan": "Asia",
      "Tanzania": "Africa",
      "Thailand": "Asia",
      "Togo": "Africa",
      "Trinidad and Tobago": "South America",
      "Tunisia": "Africa",
      "Turkey": "Europe",
      "Turkmenistan": "Asia",
      "Uganda": "Africa",
      "Ukraine": "Europe",
      "United Arab Emirates": "Asia",
      "United Kingdom": "Europe",
      "United States": "North America & Australia",
      "Uruguay": "South America",
      "Uzbekistan": "Asia",
      "Vanuatu": "North America & Australia",
      "Vatican City": "Europe",
      "Venezuela": "South America",
      "Vietnam": "Asia",
      "Zambia": "Africa",
      "Zimbabwe": "Africa"
    };

    // Populate country dropdown
    const countrySelect = document.getElementById("country");
    Object.keys(countryToContinent).sort().forEach(c => {
      let opt = document.createElement("option");
      opt.value = c;
      opt.textContent = c;
      countrySelect.appendChild(opt);
    });

    countrySelect.addEventListener("change", () => {
      document.getElementById("continent").value = countryToContinent[countrySelect.value] || "";
    });

    // Shipping calculation
    function calculate() {
      const product = document.getElementById("product").value;
      const country = document.getElementById("country").value;
      const continent = document.getElementById("continent").value;
      const mode = document.getElementById("mode").value;
      const weight = parseInt(document.getElementById("weight").value, 10);
      let cost = 0;

      if (!weight || weight <= 0) {
        alert("Please enter a valid weight.");
        return;
      }

      // === Base Rates ===
      if (product === "LETTERS") {
        if (country === "United States") {
          cost = weight <= 20 ? 32 : 32 + Math.ceil((weight - 20)/20) * 22;
        } else {
          cost = weight <= 20 ? 25 : 25 + Math.ceil((weight - 20)/20) * 15;
        }
      } else if (product === "SMALL_PACKETS") {
        if (country === "United States") {
          cost = weight <= 100 ? 115 : 115 + Math.ceil((weight - 100)/100) * 105;
        } else {
          cost = weight <= 100 ? 80 : 80 + Math.ceil((weight - 100)/100) * 70;
        }
      } else if (product === "PRINTED_PAPER") {
        if (country === "United States") {
          cost = weight <= 20 ? 35 : 35 + Math.ceil((weight - 20)/20) * 25;
        } else {
          cost = weight <= 20 ? 25 : 25 + Math.ceil((weight - 20)/20) * 15;
        }
      } else if (product === "M_BAG") {
        if (weight <= 5000) {
          cost = 700;
        } else {
          cost = 700 + Math.ceil((weight - 5000)/1000) * 150;
        }
      } else if (product === "POSTCARD") {
        if (["Nepal","Bangladesh","Bhutan"].includes(country)) {
          cost = 10;
        } else {
          cost = 15;
        }
      } else if (product === "AEROGRAMME") {
        cost = 20;
      }

      // === Add SAL surcharge ===
      if (mode === "SAL") {
        let salFee = 0;
        if (continent === "Asia") salFee = 3;
        else if (continent === "Europe") salFee = 4;
        else if (continent === "Africa") salFee = 4;
        else if (continent === "North America & Australia") salFee = 7;
        else if (continent === "South America") salFee = 9;
        cost += Math.ceil(weight / 20) * salFee;
      }

      // === Add Air surcharge ===
      if (mode === "AIR") {
        let airFee = 0;
        if (continent === "Asia") airFee = 4;
        else if (continent === "Europe") airFee = 5;
        else if (continent === "Africa") airFee = 5;
        else if (continent === "North America & Australia") airFee = 8;
        else if (continent === "South America") airFee = 10;
        cost += Math.ceil(weight / 20) * airFee;
      }

      // Add tax
      const tax = cost * 0.18;
      const total = cost + tax;

      document.getElementById("result").style.display = "block";
      document.getElementById("result").innerHTML =
        `<strong>Base Cost:</strong> ₹${cost.toFixed(2)}<br>
         <strong>Tax (18%):</strong> ₹${tax.toFixed(2)}<br>
         <strong>Total:</strong> ₹${total.toFixed(2)}`;
    }
  </script>
</body>
</html>

